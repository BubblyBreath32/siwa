function startClassification()
{
  navigator.mediaDevices.getUserMedia({ audio: true});
  classifier = ml5.soundClassifier('https://teachablemachine.withgoogle.com/models/u02fOYRBx/model.json', modelReady);
}

function modelReady(){
  classifier.classify(gotResults);
}
var dog = 0;
var cat = 0;

function gotResults(error, results) {
  if (error) {
    console.error(error);
  } else {
    console.log(results);
    random_number_r = Math.floor(Math.random() * 255) + 1;
    random_number_g = Math.floor(Math.random() * 255) + 1;
    random_number_b = Math.floor(Math.random() * 255) + 1;


    document.getElementById("result_label").innerHTML = 'Detected voice is of  - '+ results[0].label;
    document.getElementById("result_count").innerHTML = 'Detected Dog - '+dog+ ' Detected Cat - '+cat;
    document.getElementById("result_label").style.color = "rgb("+random_number_r+","+random_number_g+","+random_number_r+")";
    document.getElementById("result_count").style.color = "rgb("+random_number_r+","+random_number_g+","+random_number_r+")";

    img = document.getElementById('animal_image');

    if (results[0].label == "Barking") {
      img.src = 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRP6mLsYMs8OS1gJTyCB4dcag2Op8E_a3pm2XAQdfR9Bl-lnpY88RrnzLPicYdcfq_FAvM&usqp=CAU';
      dog = dog+1;
    } else if (results[0].label == "Meowing") {
      img.src = 'data:image/jpeg;base64,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';
      cat = cat + 1;
    } else{
      img.src = 'listen.gif';
      img.alt = "ear image";
    }
  }
}
